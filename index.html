<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Soccer Team Simplex Optimisation</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        label { display: inline-block; width: 200px; }
        input { margin-bottom: 10px; width: 100px; }
        table { border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #aaa; padding: 8px; text-align: center; }
        th { background-color: #eee; }
        button { padding: 5px 15px; margin-top: 10px; }
    </style>
</head>
<body>
<h1>Soccer Team Simplex Optimisation</h1>

<div>
    <label>Attacker Cost (€): </label>
    <input type="number" id="attCost" value="141636.36"><br>

    <label>Defender Cost (€): </label>
    <input type="number" id="defCost" value="124157.89"><br>

    <label>Attack Performance Threshold (AP): </label>
    <input type="number" id="ap" value="2.5"><br>

    <label>Defence Performance Threshold (DP): </label>
    <input type="number" id="dp" value="4.52"><br>

    <button id="run">Run Optimisation</button>
</div>

<h2>Results</h2>
<div id="result"></div>

<script>
function runSimplex() {
    // Get inputs
    const attackerCost = parseFloat(document.getElementById("attCost").value);
    const defenderCost = parseFloat(document.getElementById("defCost").value);
    const AP = parseFloat(document.getElementById("ap").value);
    const DP = parseFloat(document.getElementById("dp").value);

    // Performance coefficients
    const alphaA = 0.4273, alphaD = 0.0355;
    const betaA = 0.2464, betaD = 0.9223;

    // Solve 2x2 linear system
    const det = alphaA*betaD - alphaD*betaA;
    let xA = 0, xD = 0;
    if (det !== 0) {
        xA = (AP*betaD - alphaD*DP)/det;
        xD = (alphaA*DP - betaA*AP)/det;
        // Clip to non-negative
        xA = Math.max(0, xA);
        xD = Math.max(0, xD);
    }

    // Enforce total team size <= 10
    const totalPlayers = xA + xD;
    if (totalPlayers > 10) {
        const scale = 10 / totalPlayers;
        xA *= scale;
        xD *= scale;
    }

    // Calculate costs
    const costA = xA * attackerCost;
    const costD = xD * defenderCost;
    const totalCost = costA + costD;

    // Build HTML table
    let html = `<table>
                    <tr><th>Type</th><th>Ratio</th><th>Costs (€)</th></tr>
                    <tr><td>Attacker</td><td>${xA.toFixed(2)}</td><td>€${costA.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</td></tr>
                    <tr><td>Defender</td><td>${xD.toFixed(2)}</td><td>€${costD.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</td></tr>
                    <tr><td><strong>Total Cost</strong></td><td>-</td><td>€${totalCost.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</td></tr>
                </table>`;

    document.getElementById("result").innerHTML = html;
}

document.getElementById("run").addEventListener("click", runSimplex);
</script>

</body>
</html>
